<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Master the definition and manipulation of trajectories and activities.
">
<title>Advanced Trajectory Usage • simmer | DES for R</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Advanced Trajectory Usage">
<meta property="og:description" content="Master the definition and manipulation of trajectories and activities.
">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115358925-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115358925-1');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">simmer | DES for R</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.4.6.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">
    <span class="fa fa-gears"></span>
     
    Reference
  </a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../articles/index.html">
    <span class="fa fa-graduation-cap"></span>
     
    Articles
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    News
  </a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/r-simmer/simmer">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--">
    <span class="fa fa-puzzle-piece"></span>
     
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--">
    <a class="dropdown-item" href="../extensions/plot">simmer.plot</a>
    <a class="dropdown-item" href="../extensions/bricks">simmer.bricks</a>
    <a class="external-link dropdown-item" href="https://github.com/r-simmer/simmer.optim">simmer.optim</a>
    <a class="external-link dropdown-item" href="https://github.com/r-simmer/simmer.json">simmer.json</a>
    <a class="external-link dropdown-item" href="https://github.com/r-simmer/simmer.mon">simmer.mon</a>
  </div>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Advanced Trajectory Usage</h1>
                        <h4 data-toc-skip class="author">Iñaki Ucar,
Bart Smeets</h4>
            
            <h4 data-toc-skip class="date">2023-08-22</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/r-simmer/simmer/blob/HEAD/vignettes/simmer-03-trajectories.Rmd" class="external-link"><code>vignettes/simmer-03-trajectories.Rmd</code></a></small>
      <div class="d-none name"><code>simmer-03-trajectories.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-simmer.org">simmer</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="available-set-of-activities">Available set of activities<a class="anchor" aria-label="anchor" href="#available-set-of-activities"></a>
</h2>
<p>When a generator creates an arrival, it couples the arrival to a
given trajectory. A trajectory is defined as an interlinkage of
activities which together form the arrivals’ lifetime in the system.
Once an arrival is coupled to the trajectory, it will (in general) start
processing activities in the specified order and, eventually, leave the
system. Consider the following:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">traj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/trajectory.html">trajectory</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/seize.html">seize</a></span><span class="op">(</span>resource <span class="op">=</span> <span class="st">"doctor"</span>, amount <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/timeout.html">timeout</a></span><span class="op">(</span>task <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/seize.html">release</a></span><span class="op">(</span>resource <span class="op">=</span> <span class="st">"doctor"</span>, amount <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p>Here we create a trajectory where a patient <em>seizes</em> a doctor
for 3 minutes and then <em>releases</em> him again. This is a very
straightforward example, however, most of the trajectory-related
functions allow for more advanced usage.</p>
<p>Usage examples are provided in the help page for each activity. The
complete set of activities can be found and navigated in the <a href="https://r-simmer.org/reference/#section-add-activities-to-trajectories">reference
page</a>, or you can list them as follows:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/methods.html" class="external-link">methods</a></span><span class="op">(</span>class<span class="op">=</span><span class="st">"trajectory"</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] [                       [[                      [[&lt;-                   </span></span>
<span><span class="co">#&gt;  [4] [&lt;-                     activate                batch                  </span></span>
<span><span class="co">#&gt;  [7] branch                  clone                   deactivate             </span></span>
<span><span class="co">#&gt; [10] get_n_activities        handle_unfinished       join                   </span></span>
<span><span class="co">#&gt; [13] leave                   length                  log_                   </span></span>
<span><span class="co">#&gt; [16] print                   release_all             release_selected_all   </span></span>
<span><span class="co">#&gt; [19] release_selected        release                 renege_abort           </span></span>
<span><span class="co">#&gt; [22] renege_if               renege_in               rep                    </span></span>
<span><span class="co">#&gt; [25] rollback                seize_selected          seize                  </span></span>
<span><span class="co">#&gt; [28] select                  send                    separate               </span></span>
<span><span class="co">#&gt; [31] set_attribute           set_capacity_selected   set_capacity           </span></span>
<span><span class="co">#&gt; [34] set_global              set_prioritization      set_queue_size_selected</span></span>
<span><span class="co">#&gt; [37] set_queue_size          set_source              set_trajectory         </span></span>
<span><span class="co">#&gt; [40] stop_if                 synchronize             timeout_from_attribute </span></span>
<span><span class="co">#&gt; [43] timeout_from_global     timeout                 trap                   </span></span>
<span><span class="co">#&gt; [46] untrap                  wait                   </span></span>
<span><span class="co">#&gt; see '?methods' for accessing help and source code</span></span></code></pre></div>
<p>Additionally, you may want to try the <code>simmer.bricks</code>
package, a plugin for <code>simmer</code> which provides helper methods
for trajectories. Each <em>brick</em> wraps a common activity pattern
that can be used to build trajectories more conveniently (see the <a href="https://r-simmer.org/extensions/bricks/articles/introduction.html"><em>Introduction
to <code>simmer.bricks</code></em></a>).</p>
</div>
<div class="section level2">
<h2 id="dynamic-arguments">Dynamic arguments<a class="anchor" aria-label="anchor" href="#dynamic-arguments"></a>
</h2>
<p>Many activities accept functions as arguments to be evaluated
dynamically during the simulation. For example, see
<code><a href="../reference/timeout.html">help(timeout)</a></code>:</p>
<blockquote>
<p>task: the timeout duration supplied by either passing a numeric or a
callable object (a function) which must return a numeric.</p>
</blockquote>
<p>Be aware that if you want the <code><a href="../reference/timeout.html">timeout()</a></code>’s
<code>task</code> parameter to be evaluated dynamically, you should
supply a callable function. For example in
<code>timeout(function() rexp(1, 10))</code>, <code>rexp(1, 10)</code>
will be evaluated every time the timeout activity is executed. However,
if you supply it in the form of <code>timeout(rexp(1, 10))</code>, it
will only be evaluated once when the trajectory is defined, and will
remain static after that.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/trajectory.html">trajectory</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/timeout.html">timeout</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Exponential.html" class="external-link">rexp</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>        <span class="co"># fixed</span></span>
<span>  <span class="fu"><a href="../reference/timeout.html">timeout</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/Exponential.html" class="external-link">rexp</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span> <span class="co"># dynamic</span></span>
<span><span class="co">#&gt; trajectory: anonymous, 2 activities</span></span>
<span><span class="co">#&gt; { Activity: Timeout      | delay: 0.0960537 }</span></span>
<span><span class="co">#&gt; { Activity: Timeout      | delay: function() }</span></span></code></pre></div>
<p>Of course, this <code>task</code>, supplied as a function, may be as
complex as you need and, for instance, it may check the status of a
particular resource, interact with other entities in your simulation
model… The same applies to all the activities when they accept a
function as a parameter.</p>
</div>
<div class="section level2">
<h2 id="interaction-with-the-environment">Interaction with the environment<a class="anchor" aria-label="anchor" href="#interaction-with-the-environment"></a>
</h2>
<p>Dynamic arguments may interact with the environment to extract
parameters of interest such as the current simulation time (see
<code><a href="../reference/now.html">?now</a></code>), status of resources (see
<code><a href="../reference/get_capacity.html">?get_capacity</a></code>), status of generators (see
<code><a href="../reference/get_n_generated.html">?get_n_generated</a></code>), or directly to gather the history of
monitored values (see <code><a href="../reference/get_mon.html">?get_mon</a></code>). The only requirement is
that the simulation environment must be in the scope of the
trajectory.</p>
<p>Therefore, this will not work:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">traj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/trajectory.html">trajectory</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/log_.html">log_</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="../reference/now.html">now</a></span><span class="op">(</span><span class="va">env</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">env</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simmer.html">simmer</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_generator.html">add_generator</a></span><span class="op">(</span><span class="st">"dummy"</span>, <span class="va">traj</span>, <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/run.html">run</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span></span>
<span><span class="co">#&gt; 1: dummy0:</span></span>
<span><span class="co">#&gt; Error in (function () : object 'env' not found</span></span></code></pre></div>
<p>because the global <code>env</code> is not available at runtime: the
simulation runs <em>and then</em> the resulting object is assigned to
<code>env</code>. For <code>env</code> to be in the scope of
<code>t</code> during this simulation, it is enough to detach the
<code><a href="../reference/run.html">run()</a></code> method from the definition pipe:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">traj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/trajectory.html">trajectory</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/log_.html">log_</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="../reference/now.html">now</a></span><span class="op">(</span><span class="va">env</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">env</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simmer.html">simmer</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_generator.html">add_generator</a></span><span class="op">(</span><span class="st">"dummy"</span>, <span class="va">traj</span>, <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">env</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/run.html">run</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="va">invisible</span></span>
<span><span class="co">#&gt; 1: dummy0: 1</span></span>
<span><span class="co">#&gt; 2: dummy1: 2</span></span>
<span><span class="co">#&gt; 3: dummy2: 3</span></span></code></pre></div>
<p>And we get the expected output. However, as a general rule of good
practice, <strong>it is recommended to instantiate the environment
always in the first place</strong> to avoid possible mistakes, and
because the code becomes more readable:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># first, instantiate the environment</span></span>
<span><span class="va">env</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simmer.html">simmer</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># here I'm using it</span></span>
<span><span class="va">traj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/trajectory.html">trajectory</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/log_.html">log_</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="../reference/now.html">now</a></span><span class="op">(</span><span class="va">env</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># and finally, run it</span></span>
<span><span class="va">env</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_generator.html">add_generator</a></span><span class="op">(</span><span class="st">"dummy"</span>, <span class="va">traj</span>, <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/run.html">run</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="va">invisible</span></span>
<span><span class="co">#&gt; 1: dummy0: 1</span></span>
<span><span class="co">#&gt; 2: dummy1: 2</span></span>
<span><span class="co">#&gt; 3: dummy2: 3</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="trajectory-toolbox-joining-and-subsetting">Trajectory toolbox: joining and subsetting<a class="anchor" aria-label="anchor" href="#trajectory-toolbox-joining-and-subsetting"></a>
</h2>
<p>The <code>join(...)</code> method is very useful to concatenate
together any number of trajectories. It may be used as a standalone
function as follows:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">t1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/trajectory.html">trajectory</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/seize.html">seize</a></span><span class="op">(</span><span class="st">"dummy"</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">t2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/trajectory.html">trajectory</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/timeout.html">timeout</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">t3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/trajectory.html">trajectory</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/seize.html">release</a></span><span class="op">(</span><span class="st">"dummy"</span>, <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">t0</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/join.html">join</a></span><span class="op">(</span><span class="va">t1</span>, <span class="va">t2</span>, <span class="va">t3</span><span class="op">)</span></span>
<span><span class="va">t0</span></span>
<span><span class="co">#&gt; trajectory: anonymous, 3 activities</span></span>
<span><span class="co">#&gt; { Activity: Seize        | resource: dummy, amount: 1 }</span></span>
<span><span class="co">#&gt; { Activity: Timeout      | delay: 1 }</span></span>
<span><span class="co">#&gt; { Activity: Release      | resource: dummy, amount: 1 }</span></span></code></pre></div>
<p>Or it may operate inline, like another activity:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">t0</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/trajectory.html">trajectory</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/join.html">join</a></span><span class="op">(</span><span class="va">t1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/timeout.html">timeout</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/join.html">join</a></span><span class="op">(</span><span class="va">t3</span><span class="op">)</span></span>
<span><span class="va">t0</span></span>
<span><span class="co">#&gt; trajectory: anonymous, 3 activities</span></span>
<span><span class="co">#&gt; { Activity: Seize        | resource: dummy, amount: 1 }</span></span>
<span><span class="co">#&gt; { Activity: Timeout      | delay: 1 }</span></span>
<span><span class="co">#&gt; { Activity: Release      | resource: dummy, amount: 1 }</span></span></code></pre></div>
<p>You can think about a trajectory object as a list of activities that
has a length</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">t0</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 3</span></span></code></pre></div>
<p>and can be subset using the standard operator <code>[</code>. For
instance, you can select the activities you want with a logical
vector:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">t0</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt; trajectory: anonymous, 2 activities</span></span>
<span><span class="co">#&gt; { Activity: Seize        | resource: dummy, amount: 1 }</span></span>
<span><span class="co">#&gt; { Activity: Release      | resource: dummy, amount: 1 }</span></span></code></pre></div>
<p>Or a set of indices that respect the order given:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">t0</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt; trajectory: anonymous, 2 activities</span></span>
<span><span class="co">#&gt; { Activity: Seize        | resource: dummy, amount: 1 }</span></span>
<span><span class="co">#&gt; { Activity: Release      | resource: dummy, amount: 1 }</span></span>
<span><span class="va">t0</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt; trajectory: anonymous, 2 activities</span></span>
<span><span class="co">#&gt; { Activity: Release      | resource: dummy, amount: 1 }</span></span>
<span><span class="co">#&gt; { Activity: Seize        | resource: dummy, amount: 1 }</span></span></code></pre></div>
<p>Or a set of indices to remove from the selection:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">t0</span><span class="op">[</span><span class="op">-</span><span class="fl">2</span><span class="op">]</span></span>
<span><span class="co">#&gt; trajectory: anonymous, 2 activities</span></span>
<span><span class="co">#&gt; { Activity: Seize        | resource: dummy, amount: 1 }</span></span>
<span><span class="co">#&gt; { Activity: Release      | resource: dummy, amount: 1 }</span></span></code></pre></div>
<p>Or by name, but note that this does <strong>not</strong> respect the
order given though, because it performs a match:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">t0</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"seize"</span>, <span class="st">"release"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt; trajectory: anonymous, 2 activities</span></span>
<span><span class="co">#&gt; { Activity: Seize        | resource: dummy, amount: 1 }</span></span>
<span><span class="co">#&gt; { Activity: Release      | resource: dummy, amount: 1 }</span></span>
<span><span class="va">t0</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"release"</span>, <span class="st">"seize"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt; trajectory: anonymous, 2 activities</span></span>
<span><span class="co">#&gt; { Activity: Seize        | resource: dummy, amount: 1 }</span></span>
<span><span class="co">#&gt; { Activity: Release      | resource: dummy, amount: 1 }</span></span></code></pre></div>
<p>If you provide no indices, the whole trajectory is returned:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">t0</span><span class="op">[</span><span class="op">]</span></span>
<span><span class="co">#&gt; trajectory: anonymous, 3 activities</span></span>
<span><span class="co">#&gt; { Activity: Seize        | resource: dummy, amount: 1 }</span></span>
<span><span class="co">#&gt; { Activity: Timeout      | delay: 1 }</span></span>
<span><span class="co">#&gt; { Activity: Release      | resource: dummy, amount: 1 }</span></span></code></pre></div>
<p>In fact, you are <strong>cloning</strong> the trajectory with the
latter command. It is equivalent to <code>t0[1:length(t0)]</code> or
<code>join(t0)</code>.</p>
<p>The generics <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">head()</a></code> and <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail()</a></code> use the
<code>[</code> operator under the hood, thus you can use them as
well:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">t0</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; trajectory: anonymous, 2 activities</span></span>
<span><span class="co">#&gt; { Activity: Seize        | resource: dummy, amount: 1 }</span></span>
<span><span class="co">#&gt; { Activity: Timeout      | delay: 1 }</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">t0</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; trajectory: anonymous, 2 activities</span></span>
<span><span class="co">#&gt; { Activity: Timeout      | delay: 1 }</span></span>
<span><span class="co">#&gt; { Activity: Release      | resource: dummy, amount: 1 }</span></span></code></pre></div>
<p>The <code>[[</code> operator can also be used to extract <strong>only
one</strong> element:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">t0</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt; trajectory: anonymous, 1 activities</span></span>
<span><span class="co">#&gt; { Activity: Timeout      | delay: 1 }</span></span></code></pre></div>
<p>which is equivalent to <code>t0[2]</code>. If a string is provided,
it ensures that only the first match is returned:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/join.html">join</a></span><span class="op">(</span><span class="va">t0</span>, <span class="va">t0</span><span class="op">)</span><span class="op">[</span><span class="st">"timeout"</span><span class="op">]</span></span>
<span><span class="co">#&gt; trajectory: anonymous, 2 activities</span></span>
<span><span class="co">#&gt; { Activity: Timeout      | delay: 1 }</span></span>
<span><span class="co">#&gt; { Activity: Timeout      | delay: 1 }</span></span>
<span><span class="fu"><a href="../reference/join.html">join</a></span><span class="op">(</span><span class="va">t0</span>, <span class="va">t0</span><span class="op">)</span><span class="op">[[</span><span class="st">"timeout"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt; trajectory: anonymous, 1 activities</span></span>
<span><span class="co">#&gt; { Activity: Timeout      | delay: 1 }</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Iñaki Ucar, Bart Smeets.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
