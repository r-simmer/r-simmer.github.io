<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Plotting simmer statistics • simmer.plot</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">simmer.plot</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="http://r-simmer.org">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-gears"></span>
     
    Reference
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-graduation-cap"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/plot.simmer.html">Plotting simmer statistics</a>
    </li>
    <li>
      <a href="../articles/plot.trajectory.html">Plotting simmer trajectories</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    News
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-puzzle-piece"></span>
     
    Extensions
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../extensions/plot">simmer.plot</a>
    </li>
    <li>
      <a href="https://github.com/r-simmer/simmer.bricks">simmer.bricks</a>
    </li>
    <li>
      <a href="https://github.com/r-simmer/simmer.optim">simmer.optim</a>
    </li>
    <li>
      <a href="https://github.com/r-simmer/simmer.json">simmer.json</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/r-simmer/simmer.plot">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Plotting simmer statistics</h1>
                        <h4 class="author">Bart Smeets, Iñaki Ucar</h4>
            
            <h4 class="date">2017-12-21</h4>
          </div>

    
    
<div class="contents">
<div id="simulation-example" class="section level2">
<h2 class="hasAnchor">
<a href="#simulation-example" class="anchor"></a>Simulation example</h2>
<p>This is the basic example from <a href="http://r-simmer.org/articles/simmer-01-introduction.html"><em>Introduction to simmer</em></a>. Please, refer to that vignette for further detail.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(simmer)
<span class="kw">library</span>(parallel)

patient &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/simmer/topics/trajectory">trajectory</a></span>(<span class="st">"patients' path"</span>) <span class="op">%&gt;%</span>
<span class="st">  </span>## add an intake activity 
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/simmer/topics/seize">seize</a></span>(<span class="st">"nurse"</span>, <span class="dv">1</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/simmer/topics/timeout">timeout</a></span>(<span class="cf">function</span>() <span class="kw">rnorm</span>(<span class="dv">1</span>, <span class="dv">15</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/simmer/topics/seize">release</a></span>(<span class="st">"nurse"</span>, <span class="dv">1</span>) <span class="op">%&gt;%</span>
<span class="st">  </span>## add a consultation activity
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/simmer/topics/seize">seize</a></span>(<span class="st">"doctor"</span>, <span class="dv">1</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/simmer/topics/timeout">timeout</a></span>(<span class="cf">function</span>() <span class="kw">rnorm</span>(<span class="dv">1</span>, <span class="dv">20</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/simmer/topics/seize">release</a></span>(<span class="st">"doctor"</span>, <span class="dv">1</span>) <span class="op">%&gt;%</span>
<span class="st">  </span>## add a planning activity
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/simmer/topics/seize">seize</a></span>(<span class="st">"administration"</span>, <span class="dv">1</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/simmer/topics/timeout">timeout</a></span>(<span class="cf">function</span>() <span class="kw">rnorm</span>(<span class="dv">1</span>, <span class="dv">5</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/simmer/topics/seize">release</a></span>(<span class="st">"administration"</span>, <span class="dv">1</span>)

envs &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/parallel/topics/mclapply">mclapply</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="cf">function</span>(i) {
  <span class="kw"><a href="http://www.rdocumentation.org/packages/simmer/topics/simmer">simmer</a></span>(<span class="st">"SuperDuperSim"</span>) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw"><a href="http://www.rdocumentation.org/packages/simmer/topics/add_resource">add_resource</a></span>(<span class="st">"nurse"</span>, <span class="dv">1</span>) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw"><a href="http://www.rdocumentation.org/packages/simmer/topics/add_resource">add_resource</a></span>(<span class="st">"doctor"</span>, <span class="dv">2</span>) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw"><a href="http://www.rdocumentation.org/packages/simmer/topics/add_resource">add_resource</a></span>(<span class="st">"administration"</span>, <span class="dv">1</span>) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw"><a href="http://www.rdocumentation.org/packages/simmer/topics/add_generator">add_generator</a></span>(<span class="st">"patient"</span>, patient, <span class="cf">function</span>() <span class="kw">rnorm</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">2</span>)) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw"><a href="http://www.rdocumentation.org/packages/simmer/topics/run">run</a></span>(<span class="dv">80</span>) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw"><a href="http://www.rdocumentation.org/packages/simmer/topics/wrap">wrap</a></span>()
})</code></pre></div>
</div>
<div id="basic-visualisation-tools" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-visualisation-tools" class="anchor"></a>Basic visualisation tools</h2>
<p>This package provides some basic visualisation tools to help you take a glance at your simulations quickly, but of course you probably may want to develop your own data analysis.</p>
<p>There are three types of plot implemented with different metrics available:</p>
<ul>
<li>Plot of resources. Two metrics available:
<ul>
<li>the usage of a resource over the simulation time frame.</li>
<li>the utilization of specified resources in the simulation.</li>
</ul>
</li>
<li>Plot of arrivals. Three metrics available:
<ul>
<li>activity time.</li>
<li>waiting time.</li>
<li>flow time.</li>
</ul>
</li>
<li>Plot of attributes.</li>
</ul>
<p>All these plots and metrics are accessible through the S3 methods for the <code>plot</code> generic provided by this package (see <code>?plot.mon</code> for more details), which uses the <code>ggplot2</code> package as backend.</p>
<p>For instance, after you’ve left it simmering for a bit (pun intended), we can have a look at the overall resource utilization. The top and bottom of the error bars show respectively the 25th and 75th percentile of the utilization across all the replications. The top of the bar shows the median utilization.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(simmer.plot)

resources &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_mon.html">get_mon_resources</a></span>(envs)
<span class="kw">plot</span>(resources, <span class="dt">metric =</span> <span class="st">"utilization"</span>)</code></pre></div>
<p><img src="plot.simmer_files/figure-html/unnamed-chunk-3-1.png" width="576" style="display: block; margin: auto;"></p>
<p>It is also possible to have a look at resources’ activity during the simulation.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(resources, <span class="dt">metric =</span> <span class="st">"usage"</span>, <span class="kw">c</span>(<span class="st">"nurse"</span>, <span class="st">"doctor"</span>), <span class="dt">items =</span> <span class="st">"server"</span>)</code></pre></div>
<p><img src="plot.simmer_files/figure-html/unnamed-chunk-4-1.png" width="576" style="display: block; margin: auto;"></p>
<p>In the above graph, the individual lines are all separate replications. The smoothing performed is a cumulative average. Let’s take a look now at the instantaneous behaviour for a specific replication and resource. In the example below, the 6th replication is shown.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(<span class="kw"><a href="../reference/get_mon.html">get_mon_resources</a></span>(envs[[<span class="dv">6</span>]]), <span class="dt">metric =</span> <span class="st">"usage"</span>, <span class="st">"doctor"</span>, <span class="dt">items =</span> <span class="st">"server"</span>, <span class="dt">steps =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p><img src="plot.simmer_files/figure-html/unnamed-chunk-5-1.png" width="576" style="display: block; margin: auto;"></p>
<p>Next we can have a look at the evolution of the arrivals’ flow time during the simulation. In the plot below, each individual line represents a replication. A smooth line is drawn over them. All arrivals that didn’t finish their entire trajectory are excluded from the plot.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">arrivals &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_mon.html">get_mon_arrivals</a></span>(envs)
<span class="kw">plot</span>(arrivals, <span class="dt">metric =</span> <span class="st">"flow_time"</span>)</code></pre></div>
<p><img src="plot.simmer_files/figure-html/unnamed-chunk-6-1.png" width="576" style="display: block; margin: auto;"></p>
<p>Similarly one can have a look at the evolution of the activity times with <code>metric = "activity_time"</code> and waiting times with <code>metric = "waiting_time"</code>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#simulation-example">Simulation example</a></li>
      <li><a href="#basic-visualisation-tools">Basic visualisation tools</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Iñaki Ucar, Bart Smeets.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
